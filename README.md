
# 亿级流量、高并发与高性能场景下的电商详情页大型缓存架构实战

## [01_课程介绍以及高并发高可用复杂系统中的缓存架构有哪些东西？](doc/01.md)

## [02_基于大型电商网站中的商品详情页系统贯穿的授课思路介绍](doc/02.md)

## [03_小型电商网站的商品详情页的页面静态化架构以及其缺陷](doc/03.md)

## [04_大型电商网站的异步多级缓存构建+nginx数据本地化动态渲染的架构](doc/04.md)

## [05_能够支撑高并发+高可用+海量数据+备份恢复的redis的重要性](doc/05.md)


## [06.从零开始在虚拟机中一步一步搭建一个4个节点的CentOS集群](doc/06.md)


## [14_redis如何通过读写分离来承载读请求QPS超过10万+？](doc/14.md)

## [48_redis的LRU缓存清除算法讲解以及相关配置使用](doc/48.md)

## [51_基于“分发层+应用层”双层nginx架构提升缓存命中率方案分析](doc/51.md)

## [69_缓存预热解决方案：基于storm实时热点统计的分布式并行缓存预热](doc/69.md)

## [70_基于nginx+lua完成商品详情页访问流量实时上报kafka的开发](doc/70.md)
    
## [72_基于storm完成LRUMap中topN热门商品列表的算法讲解与编写](doc/72.md)

## [73_基于storm+zookeeper以及分布式锁完成热门商品列表的分段存储](doc/73.md)

## [74_基于双重zookeeper分布式锁完成分布式并行缓存预热的代码开发](doc/74.md)

## [75_将缓存预热解决方案的代码运行后观察效果以及调试和修复所有的bug](doc/75.md)

## [76_热点缓存问题：促销抢购时的超级热门商品可能导致系统全盘崩溃的场景](doc/76.md)

## [77_基于nginx+lua+storm的热点缓存的流量分发策略自动降级解决方案](doc/77.md)

## [78_在storm拓扑中加入热点缓存实时自动识别和感知的代码逻辑](doc/78.md)

## [79_在storm拓扑中加入nginx反向推送缓存热点与缓存数据的代码逻辑](doc/79.md)

## [127_商品详情页动态渲染系统：架构整体设计](doc/127.md)
   
## [128_商品详情页动态渲染系统：大型网站的多机房4级缓存架构设计](doc/128.md)

## [129_商品详情页动态渲染系统：复杂的消息队列架构设计](doc/129.md)
	
## [130_商品详情页动态渲染系统：使用多线程并发提升系统吞吐量的设计](doc/130.md)
	
## [131_商品详情页动态渲染系统：redis批量查询性能优化设计](doc/131.md)

## 175_商品详情页动态渲染系统：基于Spring Cloud开发数据直连服务

## 176_商品详情页动态渲染系统：完成多级缓存全链路的测试多个bug修复

## 177_商品详情页动态渲染系统：商品介绍分段存储以及分段加载的介绍

## 178_商品详情页动态渲染系统：高可用架构优化之读链路多级降级思路介绍

## 179_商品详情页动态渲染系统：高可用架构优化之hystrix隔离与降级

## 180_商品详情页动态渲染系统：部署jenkins持续集成服务器

## 181_商品详情页动态渲染系统：在CentOS 6安装和部署Docker

## 182_商品详情页动态渲染系统：在CentOS 6安装maven、git以及推送github

## 183_商品详情页动态渲染系统：通过jenkins+docker部署eureka服务

## 184_商品详情页动态渲染系统：twemproxy hash tag+mget优化思路介绍

## 185_商品详情页动态渲染系统：所有服务最终修改以及jenkins+docker部署

## 186_商品详情页OneService系统：整体架构设计

## 187_商品详情页OneService系统：基于Spring Cloud构建OneService服务

## 188_商品详情页OneService系统：库存服务与价格服务的代理接口开发

## 189_商品详情页OneService系统：请求预处理功能设计介绍

## 190_商品详情页OneService系统：多服务接口合并设计介绍

## 191_商品详情页OneService系统：基于hystrix进行接口统一降级

## 192_商品详情页OneService系统：基于hystrix dashboard进行统一监控

## 193_商品详情页OneService系统：基于jenkins+docker部署OneService服务

## 194_商品详情页OneService系统：基于jenkins+docker部署hystrix terbine服务

## 195_商品详情页前端介绍&课程总结&Java架构师展望

## Override

[如何支撑百亿级数据的存储与计算](https://mp.weixin.qq.com/s/eqtR9QAMIm3F4QnGut1vrA)

[如何设计高容错分布式计算系统](https://mp.weixin.qq.com/s/Omzkr-9BoL3GjyiWn9Nhdg)

[如何设计承载百亿流量的高性能架构](https://mp.weixin.qq.com/s/o8rZwDGkJwPxHsPpBcQh9w)

[如何设计每秒十万查询的高并发架构](https://mp.weixin.qq.com/s/o8rZwDGkJwPxHsPpBcQh9w)

[如何设计全链路99.99%高可用架构](https://mp.weixin.qq.com/s/3-eWMVje_PWnwGmsZZBJog)

[亿级流量系统架构之如何在上万并发场景下设计可扩展架构（上）？](https://mp.weixin.qq.com/s/8zHlTwTQkl3LNS5beOf5AA)

[亿级流量系统架构之如何在上万并发场景下设计可扩展架构（中）？](https://mp.weixin.qq.com/s/ThoeXs-Dz7xbs-Nl7Mbfag)

[亿级流量系统架构之如何在上万并发场景下设计可扩展架构（下）？](https://mp.weixin.qq.com/s/f4We1V8EAIyM8wpvwAHmwQ)

[专栏总结](https://mp.weixin.qq.com/s/AkZn-RjXcZYdZ2PjQ8_YHA)

[如何保证百亿流量下的数据一致性（上）](https://mp.weixin.qq.com/s/hh-kpRLwKRLLK8fG-5jzTQ)

[如何保证百亿流量下的数据一致性（中）？](https://mp.weixin.qq.com/s/suPMfwaXc4ze_csS2WfzHA)

[如何保证百亿流量下的数据一致性（下）？](https://mp.weixin.qq.com/s/TdGiiBzaOTo1TeY40NpSTw)

[互联网面试必杀：如何保证消息中间件全链路数据100%不丢失（1）](https://mp.weixin.qq.com/s/uqWIf0MAet_StszuOrZCwQ)

[互联网面试必杀：如何保证消息中间件全链路数据100%不丢失（2）](https://mp.weixin.qq.com/s/9SFrwaCCLnNyuCqP_KQ0zw)

[数据一致性重构的食用指南](https://mp.weixin.qq.com/s/bZwhgi9MFioSmfPeb9tcsg)

[面试大杀器：消息中间件如何实现消费吞吐量的百倍优化？](https://mp.weixin.qq.com/s/vZ4KVC2eGmssnQUyIKgzfw)

[高并发场景下，如何保证生产者投递到消息中间件的消息不丢失？](https://mp.weixin.qq.com/s/r2_o5wa6Gn94NY4ViRnjpA)

[用大白话给你讲小白都能看懂的分布式系统容错架构](https://mp.weixin.qq.com/s/DKf63ZDJQKoEiOmGqn3NxQ)

[你的系统如何支撑高并发？](https://mp.weixin.qq.com/s/nh_a_ea0JDNFqWJbgRRmNA)

[支撑百万连接的系统应该如何设计其高并发架构？](https://mp.weixin.qq.com/s/12MVd1i-ZRyohI4rh9P4uw)

[如何设计一个百万级的消息推送系统](https://mp.weixin.qq.com/s/wCbBKCR2CIKAOMdBsoj2pQ)



## 如何设计每秒十万查询的高并发架构

### 4.1.分库分表 + 读写分离

### 4.2.每秒10万查询的高并发挑战

统计数据:99%请求为当日数据(热数据),1%请求为历史数据(冷数据)

### 4.3.数据的冷热分离架构

将今日实时计算出来的热数据放在一个MySQL集群里，将离线计算出来的冷数据放在另外一个MySQL集群里

然后开发一个数据查询平台,封装底层的多个MySQL集群,根据查询条件动态路由到热数据存储或者是冷数据存储

### 4.4.冷数据存储和查询的问题

问题:

1).冷数据的数据量不断增长,mysql需要不断扩容

2).分库、分表后,库和表维护麻烦

解决:
ES+HBase+内存的SQL计算引擎

[Elasticsearch+Hbase实现海量数据秒级查询](https://blog.csdn.net/sdksdk0/article/details/53966430)

先决条件:入库时,冗余字段,避免表关联

步骤:
1). where条件,先走ES的分布式高性能索引查询，ES可以针对海量数据高性能的检索出来需要的那部分数据



2). 将检索出来的数据对应的完整的各个数据字段，从HBase里提取出来，拼接成完成的数据

3). 将这份数据集放在内存里，进行复杂的函数计算、分组聚合以及排序等操作

### 4.5.实时数据存储引入缓存集群

缓存集群:实时数据每次更新后写入的时候,都是写数据库集群同时还写缓存集群的,是双写的方式

### 4.6.总结

热数据基于缓存集群+数据库集群来承载高并发的每秒十万级别的查询

冷数据基于ES+HBase+内存计算的自研查询引擎来支撑海量数据存储以及高性能查询

热数据查询响应时间:几十毫秒

冷数据查询响应时间:200毫秒以内




### 高并发连接

[一步步动手实现高并发的Reactor模型 —— Kafka底层如何充分利用多线程优势去处理网络I/O与业务分发](https://my.oschina.net/anur/blog/2988177)


